# =============================================================================
# Cable Configuration
# =============================================================================
# This file configures Action Cable (WebSocket) settings for different environments.
#
# ADAPTERS:
# - async: In-memory adapter, good for testing but doesn't persist connections
# - test: Adapter for running tests
# - solid_cable: PostgreSQL-backed adapter (Rails 8's built-in solution)
#   This is what we use for production and development
#
# SOLID CABLE OPTIONS:
# - connects_to.database.writing: Which database to use for storing messages
# - polling_interval: How often clients check for missed messages (when reconnecting)
# - message_retention: How long to keep broadcast messages (older messages are deleted)
#
# =============================================================================

development:
  # Use solid_cable adapter for development
  # This stores WebSocket messages in PostgreSQL (via Solid Cable)
  # Benefits:
  #   - Messages persist even if server restarts
  #   - Multiple server instances can share messages
  #   - Same as production setup
  adapter: solid_cable
  connects_to:
    database:
      writing: cable
  # Clients check for missed messages every 0.5 seconds when reconnecting
  polling_interval: 0.5.seconds
  # Keep broadcast messages for 1 day
  message_retention: 1.day

test:
  adapter: test

production:
  adapter: solid_cable
  connects_to:
    database:
      writing: cable
  polling_interval: 0.1.seconds
  message_retention: 1.day
